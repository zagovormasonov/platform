# Настройка Storage для изображений статей

## Проблема
При попытке загрузить изображение в статью возникает ошибка:
```
Bucket not found
```

## Решение

### Вариант 1: Через Supabase Dashboard (Рекомендуется)

1. **Откройте Supabase Dashboard**
   - Перейдите в ваш проект Supabase
   - Выберите раздел **Storage**

2. **Создайте новый bucket**
   - Нажмите **"New bucket"**
   - Имя: `articles`
   - Сделайте его **Public** (включите галочку)
   - Нажмите **"Create bucket"**

3. **Настройте политики безопасности**
   - Перейдите в **SQL Editor**
   - Выполните скрипт `supabase-storage-articles.sql`

### Вариант 2: Через SQL (Альтернативный)

Выполните весь скрипт `supabase-storage-articles.sql` в **SQL Editor**:

```sql
-- Создание bucket для изображений статей
INSERT INTO storage.buckets (id, name, public)
VALUES ('articles', 'articles', true)
ON CONFLICT (id) DO NOTHING;

-- Политики безопасности...
```

## Политики безопасности

После создания bucket будут настроены следующие политики:

- ✅ **Загрузка**: Только аутентифицированные пользователи могут загружать файлы в свои папки
- ✅ **Просмотр**: Все могут просматривать изображения статей  
- ✅ **Обновление**: Только владелец может обновлять свои файлы
- ✅ **Удаление**: Только владелец может удалять свои файлы

## Структура файлов

Файлы будут храниться в следующей структуре:
```
articles/
├── user_id_1/
│   ├── 1234567890.jpg
│   └── 1234567891.png
├── user_id_2/
│   ├── 1234567892.jpg
│   └── 1234567893.png
└── ...
```

## Проверка

После настройки попробуйте:
1. Создать новую статью
2. Нажать "Выбрать изображение"
3. Загрузить любое изображение (до 5MB)
4. Изображение должно появиться в превью

## Устранение неполадок

### Ошибка "Bucket not found"
- Убедитесь что bucket `articles` создан в Storage
- Проверьте что он помечен как Public

### Ошибка "Permission denied"  
- Выполните SQL-скрипт с политиками безопасности
- Убедитесь что пользователь аутентифицирован

### Ошибка "File too large"
- Максимальный размер файла: 5MB
- Поддерживаемые форматы: JPG, PNG, GIF, WebP
